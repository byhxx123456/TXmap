<!doctype html>
<html lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <script lang="javascript" type="text/javascript" src="jquery-1.12.4.min.js"></script>
  <title>百度API下的腾讯地图</title>
  <style type="text/css">
  	*{
		margin:0;
		padding:0;
	}
  	body, html {
  		width: 100%;
  		height: 100%;
  		overflow: hidden;
  		margin:0;
  		font-family:"微软雅黑";}
  	
	#biaotou{
		width: 100%;
		height: 30px;
		margin-top: 15px
		/*background-color:red;*/
	}
	#xiabu{
		width: 100%;
		height: 900px;
	}
	.biaotouzuo{
		float:left;

	}
	.biaotouyou{
		float:right;
	}
	#zuoban{
		width: 20%;
		height: 900px;
		float: left;
	}
	.logo{
		width:250px;
		height:80px;
		background:url("img/tencent_color_logo.png") no-repeat 0 0;
		margin:0 auto;
		margin-top:20px;
		/*background-color:blue;*/
	}
	#tubiao11{
		width:250px;
		height:80px;
		/*background-color:red;*/
	}
	#tubiao22{
		width:250px;
		height:50px;
		/*background-color:green;*/
	}
	.tubiao1{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat 0px 0px;
		float:left;
		margin:7px;
		margin-left:30px;
	}
	.tubiao2{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat -38px 0px;
		float:left;
		margin:7px;
	}
	.tubiao3{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat -76px 0px;
		float:left;
		margin:7px;
	}
	.tubiao4{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat -114px 0px;
		float:left;
		margin:7px;
	}
	a{
		float: left;
		margin-left: 24px;
		margin-top: -10px;
	}
	.tubiao5{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat -152px 0px;
		float:left;
		margin:7px;
		margin-left:30px;
	}
	.tubiao6{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat -190px 0px;
		float:left;
		margin:7px;
	}
	.tubiao7{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat -228px 0px;
		float:left;
		margin:7px;
	}
	.tubiao8{
		width:38px;
		height:50px;
		background:url("img/poi_type_icons.png") no-repeat -266px 0px;
		float:left;
		margin:7px;
	}
	a{
		float: left;
		margin-left: 24px;
		margin-top: -10px;
	}
	.swiper-container .slide1 {
		background: url(img/huitu.jpg) no-repeat 0 0;
		background-size: cover;
		width:100%;
		height: 130px;
		margin-top: 50px;
	}

	.swiper-container .slide2 {
		background: url(img/mobile_link.jpg) no-repeat 0 0;
		background-size: cover;
		width:100%;
		height: 130px;
		margin-top: 10px;
	}
	#youban{
		width: 80%;
		height: 900px;
		float: right;
	}
	
	#allmap{
		width: 100%;
		height: 670px;
	}
  </style>
 <script type="text/javascript" src="http://api.map.baidu.com/api?type=webgl&v=1.0&ak=oT5tLub8shPy5OnTYjQNMZgCDfIqS91B"></script>
 </head>
 <body>
	
 	<div id="biaotou">
		<div class="bioatouzuo">
			<a href="https://map.qq.com/mobile/">手机地图</a>
            <a href="https://lbs.qq.com/">地图API</a>
			<a href="https://heat.qq.com/">位置大数据</a>
			<a href="http://bzdt.ch.mnr.gov.cn/">标准地图</a>
			<div class="biaotouyou">
				<a href="https://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=token&client_id=101485616&redirect_uri=https%3A//map.qq.com/session.html&state=pcmap">登录</a>
				<a href="https://ugc.map.qq.com/AppBox/Landlord/login.html">商户标注</a>
				<a href="https://lbs.qq.com/dev/console/ticket/list">反馈意见</a>
				<a href="https://ugc.map.qq.com/AppBox/Landlord/serveagreement.html">服务协议</a>
				<a href="https://map.qq.com/help/index.html">帮助</a>
			</div>
		</div>
	</div>
	<div id="xiabu">
		<div id="zuoban">
			<div class="logo"></div>
			<div id="tubiao11">
				<a class="tubiao1" href=""></a>
				<a class="tubiao2"  href=""></a>	
				<a class="tubiao3"  href=""></a>
				<a class="tubiao4"  href=""></a>
				<a  href="">酒店</a>
				<a  href="">餐饮</a>
				<a  href="">购物</a>
				<a  href="">电影院</a>

			</div>
			<div id="tubiao22">
				<a class="tubiao5"  href=""></a>
				<a class="tubiao6"  href=""></a>
				<a class="tubiao7"  href=""></a>
				<a class="tubiao8"  href=""></a>
				<a  href="">景点</a>
				<a  href="">银行</a>
				<a  href="">超市</a>
				<a  href="">找房</a>
			</div>
			<div class="swiper-container">
				<div class="swiper-wrapper">
					<div class="swiper-slide slide1"></div>
					<div class="swiper-slide slide2"></div>
				</div>
			</div>
		</div>
		<div id="youban">
			<div class="allsearch">
				<div class="search">
					<input type="text" id="keyword">
					<input type="button" value="搜索" onclick="query()">
					
				</div>
				<div id="driving_way ">
					<input type="text" id="startPosition" >
					<input type="text" id="endPosition" >
					<select>
						<option value="0" >最少时间</option>
						<option value="1" >最短距离</option>
						<option value="2" >避开高速</option>
					</select>
					<input type="button" id="result" value="查询" />
				</div>
				<div id="r-result"></div>
				<div class="fangshi">
					<div id="btns">
						<input type="button" value="普通地图" id="norMap" onclick="changeNorMap()"/>
						<input type="button" value="影像地图" id="imgMap" onclick="changeImgMap()"/>
						<input type="button" value="打开路况" id="lukuangMap" onclick="openLuKuang()"/>
						<input type="button" value="关闭路况" id="closelukuangMap" onclick="closeLuKuang()"/>
					</div>
				</div>
			</div>
			<div id="allmap"></div>
		</div>
  	</div>
 </body>
</html>
<script>
     //命名空间为BMapGL
    var map = new BMapGL.Map("allmap");    // 创建Map实例  
	// 初始化地图,设置中心点坐标和地图级别
    map.centerAndZoom(new BMapGL.Point(118.5, 27.5), 5);
	//开启鼠标滚轮缩放
    map.enableScrollWheelZoom(true);
	// 添加比例尺控件     
	var scaleCtrl = new BMapGL.ScaleControl();  
    map.addControl(scaleCtrl);
	// 添加缩放控件
	var zoomCtrl = new BMapGL.ZoomControl();  
    map.addControl(zoomCtrl);
	// 添加3D控件
	var navi3DCtrl = new BMapGL.NavigationControl3D();  
    map.addControl(navi3DCtrl);
	//影像地图，普通地图，路况
	function changeNorMap(){
		map.setMapType(BMAP_NORMAL_MAP)
	}
	function changeImgMap(){
		map.setMapType(BMAP_EARTH_MAP)
	}
	function openLuKuang(){
		map.setTrafficOn()
	}
	function closeLuKuang(){
		map.setTrafficOff()
	}
	var opts={
		anchor:BMAP_ANCHOR_TOP_RIGHT,
		offset:{width:0,height:0}
	}
	//个性化地图
	map.setMapStyleV2({styleId: 'eed2744740e4acefa69a22c948d1767b'});
	//搜索框
	var local = new BMapGL.LocalSearch(map, {
		renderOptions:{map: map}
	});
	function query(){
		var keyword=document.getElementById("keyword").value;
		local.search(keyword);
	}
	//信息窗口
	/*var coorArr=[[118.1492985,39.61083057],[113.6808674,36.57387222],[114.3886793,36.38536096],[115.1910757,36.63005076],[116.9951,30.71261486]];
	for (var i=0;i<coorArr.length;i++)
	{
		var point = new BMapGL.Point(coorArr[i][0],coorArr[i][1]);   
		var marker = new BMapGL.Marker(point);        // 创建标注   
		map.addOverlay(marker); // 将标注添加到地图中
		map.addEventListener("click",function(e)
		{
			var opts = 
			{
				width : 200,     // 信息窗口宽度
				height: 100,     // 信息窗口高度
				title : "博物院" , // 信息窗口标题
				message:"故宫"
			}
			var infoWindow = new BMapGL.InfoWindow("地址：北京市东城区王府井大街88号乐天银泰百货八层", opts);  // 创建信息窗口对象        
				map.openInfoWindow(infoWindow, new BMapGL.Point(e.latlng.lng,e.latlng.lat)); //开启信息窗口
		}); 
	}
	//设置中心点坐标和地图级别
	var lonall=0;
	var latall=0;
	for(var i=0;i<coorArr.length;i++)
	{
		var lon=coorArr[i][0];
		lonall+=lon;
		var lat=coorArr[i][1];
		latall+=lat;
	}
	map.flyTo(new BMapGL.Point(lonall/coorArr.length,latall/coorArr.length),7);*/
	//根据关键字查询最短距离最小时间等
	
	
     $("#result").click(function(){
        map.clearOverlays();
		var start = document.getElementById("startPosition").value;//起始点
		var end = document.getElementById("endPosition").value;//终止点
		var routePolicy = [ BMAP_TRANSIT_POLICY_LEAST_TIME ,BMAP_INTERCITY_POLICY_LEAST_TIME ,BMAP_DRIVING_POLICY_AVOID_HIGHWAYS];
        var i=$("select").val();
        search(start,end,routePolicy[i]);
        function search(start,end,route){
            var driving = new BMapGL.DrivingRoute(map, {renderOptions:{map: map, autoViewport: true,enableDragging : true},policy: route});
            driving.search(start,end);
        }

    });
</script>
